# 更新记录

## 2025 年 7 月 21 日

- feat(项目): 实现项目批量删除与国际化支持
  - 新增项目批量删除功能，包括前端 UI、后端 API、确认对话框和多选操作支持。
  - 添加了相关功能的国际化字段。
- docs: 文档与脚本优化
  - 优化了“智能更新日志”工作流的文档，详细说明了分组和提炼提交记录的步骤。
  - 在 i18n 扫描脚本的输出中增加了翻译注意事项。

## 2025 年 7 月 20 日

- feat(项目与插件): 增强项目管理与插件系统
  - 项目管理: 新增项目设置页面，支持创建项目时添加描述，并优化了仪表盘卡片样式与交互。
  - 插件系统: 重构插件管理界面，添加多选功能，并实现了插件热重载功能，支持动态启用/禁用。
- feat(UI 组件): 新增通用数据列表组件与侧边栏响应式调整
  - 数据列表: 实现通用的 `DataListView` 组件，支持网格/列表模式、排序、筛选、选择和列宽调整，并应用该组件重构了项目和插件列表视图。
  - 侧边栏: 添加侧边栏宽度响应式调整功能。
- refactor: 编辑器与 WebSocket 核心重构
  - 编辑器: 重构工作流编辑器初始化逻辑，统一由生命周期协调器管理，并优化了标签页管理。将 `EditorView` 重命名为 `WorkflowEditorView`。
  - WebSocket: 优化消息路由，引入执行消息白名单，并重构了 WebSocket 管理和插件状态处理逻辑。
- docs: 文档更新与完善
  - 更新了插件架构文档，完善了权限声明和 UI 注入点说明。
  - 在 README 中添加了多语言界面预览截图。
  - 移除了不再适用的旧实施计划部分。
- style: 修复上下文菜单层级问题
- feat(调试): 添加全局调试日志功能

## 2025 年 7 月 19 日

- feat(系统): 增强系统状态 API 并实现插件核心架构
  - 系统状态: 增强后端状态 API，可返回更详细的磁盘、网络和操作系统信息，并更新了前端展示页面。
  - 插件系统: 实现了插件系统的核心架构，包括 `PluginLoader` 服务、API 路由、类型定义和前端加载逻辑。
- refactor(节点分组): 核心命名空间调整
  - 将分组框节点（FrameNode）从 `ui` 命名空间迁移至 `core`，分类从 `Utilities` 调整为 `layout`。
- docs(架构): 更新节点包扩展架构文档

## 2025 年 7 月 18 日

- docs(架构): 插件与扩展架构设计
  - 新增插件系统架构设计草案，详细说明了目录结构、清单文件格式、前后端改造方案及 API 分层策略。
  - 更新插件加载机制，将清单文件改为 `plugin.yaml`，并设计了分层、基于权限的 API 体系。
  - 更新了统一文件与资产管理系统设计文档的状态为“基本已实施”。

## 2025 年 7 月 16 日

- docs(架构): 更新聊天历史树图编辑与分支管理设计方案
  - 增加了对对话生成状态、节点启用状态、异步并行对话生成的描述。
  - 更新了沉浸模式和核心编辑操作的说明。
  - 扩展了 `ChatMessageNode` 的字段描述和 WebSocket 事件。

## 2025 年 7 月 15 日

- feat(项目): 添加预制项目功能
  - 新增预制项目功能，支持从 `preset-projects/` 目录加载项目模板。
  - 后端服务和路由已更新，以处理用户项目和预制项目的区分 (`source` 字段)。
  - 前端项目列表视图已更新，可分别展示“我的项目”和“预制项目”，并支持克隆操作。

## 2025 年 7 月 14 日

- refactor(前端): 优化代码结构
  - 将多个组件中的动态导入改为静态导入，以优化加载性能。
- refactor(types): 重构类型定义文件结构
  - 将庞大的 `schemas.ts` 按功能拆分为多个独立的类型定义文件，使类型结构更清晰。

## 2025 年 7 月 12 日

- feat(面板): 实现面板创建、管理与开发增强
  - 面板管理: 新增面板创建模态框、面板卡片组件及相关 API，支持从模板或全新创建。
  - 开发体验: 新增面板开发模式，支持从本地开发服务器加载面板以实现热更新。
  - SDK: 实现面板 SDK 核心功能，提供工作流调用、文件管理和日志转发等能力。
- docs: 文档迁移与更新
  - 移动了部分旧文档，并更新了双轨扩展架构设计文档。

## 2025 年 7 月 11 日

- docs: 同步历史更新日志
  - 将 2025 年 6 月 16 日至 7 月 10 日的 Git 提交记录整理并添加至更新日志。
- fix: 修正之前 AI 总结的不实内容。

## 2025 年 7 月 10 日

- docs: 添加集成创作环境设计草案
  - 集成创作环境 (Integrated Creation Environment, ICE) 设计草案（BETA）详细描述了集成创作环境的愿景、核心目标、架构与界面布局、核心工作流程、创作助手 Agent 的能力与知识来源，以及技术实现细节。
  - 愿景与核心目标：描述了 ICE 的核心愿景和目标，包括降低创作门槛、提升开发效率、统一开发流程、确保技术一致性、促进迭代优化。
  - 交互范式：介绍了对话驱动开发 (Chat-Driven Development) 的概念及其在 ICE 中的应用。
  - 三栏式布局：定义了 ICE 的三栏式布局，包括智能对话面板、文件与代码编辑区、实时预览面板的功能定位和核心特性。
  - 核心工作流程：展示了从用户需求表达到功能完整的应用面板生成的全过程，并分析了关键交互点。
  - 创作助手 Agent：详细描述了创作助手 Agent 的扩展能力和知识来源，包括意图识别、全栈代码生成、文件系统工具调用。
  - 技术实现细节：描述了后端文件服务的设计、`iframe` 沙箱与通信机制、以及实时同步机制的具体实现。
  - 结论与后续步骤：总结了 ICE 的核心价值，并提出了后续开发步骤和潜在挑战的解决思路。

## 2025 年 7 月 1 日

- feat(panel): 面板功能增强与 API 实现
  - 文件系统 API: 实现了完整的前后端文件系统 API，包括路径规范、元数据获取、类型定义及路由处理，使面板具备了文件操作能力。
  - 日志面板: 增强了日志面板功能，增加了时间戳、清空、复制和自动滚动功能，并优化了显示格式。
  - 主题同步: 添加了主题同步功能，面板现在可以响应应用主题的变化，并废弃了旧的设置获取方式。
- docs: 许可证更新
  - 将项目许可证从 MIT 更改为 AGPLv3，并添加了双重授权说明，明确了开源与商业使用的不同场景。

## 2025 年 6 月 30 日

- docs: 架构与规范文档更新
  - 统一应用模板架构: 新增统一应用模板架构方案文档，完善场景架构和文件资产管理说明。
  - LLM 适配器架构: 增强 `key_selection_strategy` 描述，新增 `least-used` 和 `lowest-latency` 策略，并支持 `scoring_config`。
  - 项目说明: 移除本地化 (i18n) 相关规则内容，并简化面板工作流绑定规范。
  - 格式规范: 更新项目文档中的格式和本地化规范，统一引号、标点和 i18n 要求。
- style: UI 样式统一与优化
  - 输入组件: 为所有输入组件统一添加 `node-input` 类名并更新基础样式。
  - 表单背景: 统一表单输入框背景色为背景表面色，并添加主题化表单控件样式。
  - 框架节点: 为框架节点添加阴影效果以增强视觉层次。
- fix(workflow): 工作流执行与保存逻辑修复
  - 输入值处理: 修复工作流执行时输入值处理逻辑，确保正确处理外部覆盖输入并保持 `GroupSlotInfo` 结构完整。
  - 默认值处理: 修复工作流执行时输入参数默认值处理问题，确保使用处理过的干净输入键值对。
  - 输出映射: 修复保存模式下 `outputInterfaceMappings` 未构建的问题。
- refactor: 代码结构与服务重构
  - 服务转换: 将 `WorkflowInvocationService` 和 `ApiAdapterManager` 重构为 composable 函数，提升复用性和可维护性。
  - 面板 API 宿主: 重构面板 API 宿主逻辑和类型定义，移除 `InvocationRequestSchema` 中的 `alias` 字段，优化脚本注入方式。
  - 图标管理: 移除本地图标组件并迁移至 `heroicons`。
  - 依赖移除: 移除 `DaisyUI` 依赖并重构按钮样式为 `Tailwind` 原子类。
  - 国际化扫描: 改进国际化扫描脚本并添加扩展语言支持，删除脚本产生的临时本地化文件。
  - 历史面板: 为历史面板添加状态翻译键并优化状态显示逻辑。
  - 节点样式: 隐藏不需要的节点调整控制点，并更新节点样式和调整手柄交互区域。
  - 工作流绑定: 重构工作流绑定界面并添加 API 代码生成功能，优化工作流 IO 详情展示。
- feat: 新增功能
  - 文件管理: 添加直接写入 JSON 文件的 API 接口。
  - 面板设置: 新增面板设置视图及组件，包括通用设置、工作流绑定和内容管理三个标签页。
  - 节点分组: 实现节点分组功能并完善相关交互，包括父节点字段支持、拖拽交互处理和状态管理。
  - 分组框节点: 新增分组框节点支持并优化节点管理，实现 `FrameNode` 组件，支持调整大小和重命名。

## 2025 年 6 月 29 日

- refactor(frontend): 前端组件与样式重构
  - 图标: 移除本地图标组件并迁移至 `heroicons`。
  - 按钮样式: 移除 `DaisyUI` 依赖并重构按钮样式为 `Tailwind` 原子类。
  - 表单样式: 统一表单输入框背景色为背景表面色。
  - 面板设置样式: 调整面板设置页面的样式和文案，统一按钮悬停效果。
  - 框架节点样式: 为框架节点添加阴影效果以增强视觉层次。
  - 节点调整手柄: 隐藏不需要的节点调整控制点，并更新节点样式和调整手柄交互区域。
- feat: 新增功能与特性
  - 文件管理: 添加直接写入 JSON 文件的 API 接口。
  - 面板设置: 新增面板设置视图及组件，包括通用设置、工作流绑定和内容管理三个标签页。
  - 工作流绑定: 在 `WorkflowBinder` 组件中添加返回按钮并优化代码格式。
  - 工作流绑定界面: 重构工作流绑定界面并添加 API 代码生成功能，优化工作流 IO 详情展示。
  - 国际化: 改进国际化扫描脚本并添加扩展语言支持，为历史面板添加状态翻译键并优化状态显示逻辑。
  - 节点分组: 实现节点分组功能并完善相关交互，包括父节点字段支持、拖拽交互处理和状态管理。
  - 分组框节点: 新增分组框节点支持并优化节点管理，实现 `FrameNode` 组件，支持调整大小和重命名。
- docs: 文档更新
  - 项目说明: 移除本地化 (i18n) 相关规则内容。
  - 架构: 简化面板工作流绑定规范说明。
  - 项目文档: 更新项目文档中的格式和本地化规范。

## 2025 年 6 月 28 日

- feat: 工作流持久化与新功能
  - 持久化状态: 实现工作流持久化状态管理和 ID 一致性，引入 `isPersisted` 状态和持久化 UUID 作为工作流 ID。
  - 数学运算节点: 为数学运算节点添加详细的结果描述，并新增矩阵运算节点支持。
  - 数学运算功能: 添加多种数学运算功能并实现结果钳制，新增对数、三角函数、比较运算等 25 种模式。
  - 节点配置: 为数学运算节点添加可搜索配置选项，并统一建议选项格式为对象。
  - 多模式节点: 实现多模式节点功能并添加数学运算节点作为示例，支持节点根据配置切换不同操作模式。
  - 共享模板面板: 添加共享模板面板支持并重构面板发现逻辑，支持同时扫描用户和共享模板目录。
- docs: 架构文档更新
  - 统一架构: 更新统一架构文档中的格式和内容细节，规范 markdown 列表格式，细化共享空间目录结构。
  - 节点类型: 更新 `ComboOption` 的说明以明确其用途。
- refactor: 代码优化与重构
  - 工作流状态: 集中管理工作流状态判断逻辑，统一到 `workflowManager` 中。
  - 数学运算节点: 将 `MathOperationNode` 的实例方法改为静态方法以提升可维护性。
  - 输入组件: 统一建议选择处理逻辑并支持搜索功能。
  - WebSocket URL: WebSocket URL 动态获取并更新代理配置。
  - 前端按钮: 替换 `DaisyUI` 按钮为原子类并更新样式指南。
- fix: 问题修复
  - 调试日志: 替换 `console.log` 为 `console.debug`。

## 2025 年 6 月 27 日

- feat: 新增功能
  - 国际化: 添加测试面板的 `DaisyUI` 组件展示及多语言支持，包括中、英、日、俄及文言文翻译。
  - 主题: 添加 `DaisyUI` 派生颜色变量并完善主题配置。
  - 工作流绑定: 添加工作流输入输出接口显示功能，提升可视化效果。
  - 图标: 添加常用图标组件（Spinner, Add, Open, Delete, Settings）并更新相关视图样式。
  - 面板: 添加面板工作流绑定配置功能，支持通过别名调用工作流。
- refactor: 代码重构与优化
  - 主题系统: 重构主题系统以简化 `DaisyUI` 集成，使用标准 `light/dark` 主题替代自定义主题名称。
  - 视图文件: 将视图文件根据功能和所属布局归类到 `views/home`、`views/project` 和 `views/settings` 目录。

## 2025 年 6 月 26 日

- chore: 前端脚手架
  - API 适配器: 为 API 适配器功能搭建了基础的前端框架，定义了核心数据结构，创建了管理界面和编辑器模态框的基本组件。
- docs: 文档更新
  - 前端 API: 更新前端 API 文档以反映 `invoke` 接口变更，将 `executeWorkflow` 重命名为 `invoke`。
- refactor: 代码重构与优化
  - 工作流调用: 重构工作流调用逻辑并引入统一服务 `WorkflowInvocationService` 作为统一入口，实现面板调用的实时预览功能。
  - WebSocket: 改进执行清理逻辑防止重复处理，添加延迟清理机制和待处理任务跟踪。
  - 前端样式: 替换 `DaisyUI` 按钮为原子类并更新样式指南。
- fix: 问题修复
  - 前端预览: 修复前端预览输出映射支持。
- feat: 新增功能
  - 工作流: 添加预览目标字段并优化执行逻辑，在 `WorkflowStorageObjectSchema` 中添加 `previewTarget` 可选字段。

## 2025 年 6 月 25 日

- refactor: 代码重构
  - LLM 消息: 将单条消息输出改为消息数组格式以支持聊天历史。
- feat: 新增功能
  - 国际化: 添加缺失节点相关翻译和 UI 控件显示配置，更新自定义 UI 语言文档中的脚本命令，优化模型预设数据结构，添加语言文件拷贝脚本。
  - 工作流: 添加缺失节点处理逻辑和 UI 显示，包括 `isMissing` 和 `originalNodeData` 字段，实现缺失节点的转换和 UI 显示。
  - 工作流数据验证: 使用 `Zod schema` 验证工作流数据，确保数据在存储、加载和转换过程中的类型安全。
  - WebSocket: 实现场景订阅机制和状态管理服务，新增 `WorldStateService` 提供场景状态原子性读写功能。
- docs: 文档更新
  - Agent: 添加 Agent 配置与运行时交互指南文档。

## 2025 年 6 月 24 日

- docs: 架构文档更新
  - 聊天历史: 添加聊天历史树图编辑与分支管理设计文档。
  - Agent 交互: 更新架构文档以反映 Agent 与用户交互的新模型，将“交互式执行流”更新为“多轮次审议循环驱动”。
  - Tauri 集成: 添加通过 Tauri 扩展实现原生能力集成的设计文档。
  - 接口规范: 在接口规范中添加描述字段，为 `WorkflowInterface` 和 `SlotDefinition` 接口添加可选描述字段。
  - 面板 API: 新增面板 API 规范和阶段 0 实施方案文档。

## 2025 年 6 月 23 日

- fix: 问题修复
  - 工作流删除: 增加工作流删除确认对话框，防止误操作。
  - 文件路径: 处理 Windows 路径中的非 ASCII 字符解码问题，对所有路径进行 `decodeURIComponent` 处理。
  - 数据库: 增加对空数据库文件的检测和处理，避免使用无效的数据库文件。
  - 工作流管理器: 修正 `useWorkflowManager` 中的 `mockLoadWorkflowFunc` 参数。
  - postcss 版本: 修正 `bun.lock` 中 `postcss` 版本不一致的问题，统一为 `8.5.6`。
- refactor: 代码重构
  - 类型系统: 将流式特性从 `DataFlowType` 解耦为独立的 `isStream` 字段，移除 `DataFlowType.STREAM` 类型。
  - workflow-preparer: 移除未使用的导入。
- feat: 新增功能
  - 项目准备: 添加 `ensureProjectReady` 中的配置检查和合并功能。
- docs: 文档更新
  - README: 重构 `README` 以提升可读性和信息密度。
  - 架构: 添加统一应用面板与 Agent 实施计划文档，更新统一架构文档中的工作流准备说明，新增统一架构总览文档。
  - 项目改造: 移动项目改造计划文档至旧目录并更新内容。

## 2025 年 6 月 22 日

- fix: 问题修复
  - 工作流状态: 修复另存为后标签页和工作流状态不同步问题。
- feat: 新增功能
  - 项目导航: 实现项目导航架构重构和状态持久化，引入新的项目布局容器和仪表盘视图。
  - LLM 适配器: 为 LLM 适配器添加流式请求支持，在 `ILlmApiAdapter` 接口中添加 `executeStream` 方法。
  - LLM 配置管理: 实现 LLM 配置管理功能 MVP，新增 LLM 配置路由和服务。
  - LLM 适配器架构: 实现 LLM 适配器架构及数据库迁移，新增 LLM API 适配器注册表服务。
  - 调度器: 添加多用户模式支持并传递用户 ID 到执行引擎。
  - LLM 节点: 添加创建消息和合并消息节点并修复文档格式。
  - 设置: 添加紧凑模式响应式布局支持。
  - LLM 配置: 添加响应式布局支持并优化 UI 细节。
  - 项目版本: 更新项目版本号。
- docs: 文档更新
  - 架构: 添加项目改造实施计划文档。
  - 节点类型: 更新多媒体数据类型命名和描述。
  - 前端 API: 更新前端 API 管理和 LLM 适配器架构文档。
  - Kilo 规则: 添加 kilo 规则。
  - 架构: 更新 LLM 适配器实施方案和本地用户系统设计文档。
- refactor: 代码重构与优化
  - LLM 请求节点: 重构 LLM 请求节点的参数结构以提升可读性。
  - 调度器: 重构服务注入机制以支持依赖注入。
  - 认证: 简化用户系统设计，统一单用户与多用户模式。
- style: 样式调整
  - Dialog: 调整遮罩层背景透明度使用 CSS 变量。
  - LLM: 调整合并消息节点的宽度为 200 像素。
  - UI: 调整背景透明度和主题样式。
  - 组件: 优化多个组件的响应式布局和样式。
  - 侧边栏: 调整用户头像和用户名的样式以适应侧边栏折叠状态。

## 2025 年 6 月 21 日

- fix: 问题修复
  - Claude 模型 ID: 修正 Claude 模型 ID 格式错误。
  - API 配置: 修复 API 配置更新时的错误处理和请求体净化。
- docs: 文档更新
  - 模型 ID: 更新模型 ID 的描述信息。
  - 本地化: 更新小地图描述为显示在右下角。
  - 前端: 添加默认头像图片资源。
- feat: 新增功能
  - LLM 节点: 添加 LLM 参数单独配置项并优化参数合并逻辑。
  - 设置: 添加画布控件显示开关功能。
  - 渠道管理: 在渠道列表中添加启用/禁用开关。
- refactor: 代码重构与优化
  - LLM 适配器: 重构渠道引用为唯一 ID 并移除前端渠道选择。
  - 主题: 批量应用 CSS 变量减少闪烁。
  - UI: 优化布尔切换组件样式并替换复选框为统一组件。
  - LLM 配置: 优化表单组件样式和功能。
  - 认证: 简化用户系统设计，统一单用户与多用户模式。
- style: 样式调整
  - 侧边栏: 优化导航项过渡效果。
  - API 频道列表: 调整频道状态标签的样式间距和大小。

## 2025 年 6 月 20 日

- style: 样式调整
  - 主题: 更新主题颜色和按钮样式。
  - 菜单: 调整菜单项的样式和间距。
- refactor: 代码重构与优化
  - 国际化扫描器: 重构国际化扫描器，改进语言文件合并逻辑。
  - 合并翻译: 重构 `mergeTranslations` 函数，改为基于最终模板结构进行合并。
  - \_meta 字段: 将 `_meta` 字段移至模板文件顶部。
  - 工作流: 重构默认工作流应用逻辑并使用转换工具。
  - UI: 移除 `uiStore` 中的冗余调试日志。
- fix: 问题修复
  - 上下文菜单: 修复上下文菜单定位问题。
  - 工作流: 实现批量添加元素并修复粘贴功能。
- feat: 新增功能
  - 国际化: 为上下文菜单添加国际化支持，为文件管理器组件和弹窗添加国际化支持，为多个组件添加国际化支持并更新到中文语言文件。
  - 节点定义: 添加节点定义调试日志注释。
  - 性能统计: 改进性能统计面板的 UI 和功能，重构组件使用统计逻辑并移除无用代码，修正组件实例统计标签描述更准确，添加组件实例统计功能，添加性能统计面板及相关功能。

## 2025 年 6 月 19 日

- feat: 国际化与节点组功能
  - 国际化支持: 为 `NodePanel`、`WorkflowPanel`、`HistoryPanel` 等组件添加 i18n 支持，并更新 `zh-CN.json` 文件。
  - 国际化框架: 添加国际化支持框架和基础翻译文件，集成 `vue-i18n` 库。
  - 国际化扫描器: 实现国际化扫描器工具，自动提取代码中的国际化键。
  - 节点组接口: 实现节点组接口同步和连接验证，确保引用工作流变更时自动更新节点组接口。
- docs: 文档更新
  - 国际化: 添加国际化实施计划文档。

## 2025 年 6 月 18 日

- feat: 新增功能
  - 工作流历史: 实现工作流历史记录功能，支持撤销和重做。
  - 节点预览: 添加节点预览功能，支持实时查看节点执行结果。
  - UI 优化: 优化节点面板和侧边栏交互，改进折叠展开动画，添加搜索过滤。
- fix: 问题修复
  - 工作流保存加载: 修复工作流保存时可能丢失节点连接的问题，解决加载大型工作流时的性能瓶颈。

## 2025 年 6 月 17 日

- feat: 新增功能
  - 节点组: 实现节点组功能，支持创建、编辑和引用。
  - 编辑器: 添加标签页系统，支持同时打开多个工作流。
  - UI: 添加主题切换功能，实现亮色和暗色主题切换。
- refactor: 代码重构与优化
  - 状态管理: 重构工作流状态管理逻辑，拆分为多个专门的组合式函数。

## 2025 年 6 月 16 日

- feat: 新增功能
  - 多输入插槽: 添加多输入插槽功能，支持多个连接到同一输入。
  - 编辑器: 实现可停靠编辑器面板，支持多标签页编辑。
  - UI: 添加右侧预览面板，用于显示节点输出和工作流状态。
- refactor: 代码重构与优化
  - 类型系统: 重构节点插槽类型系统，将 `SocketType` 替换为 `DataFlowType`。

## 2025 年 6 月 15 日

- refactor: 代码重构与优化
  - 侧边栏状态: 将侧边栏状态管理迁移到 `uiStore`。
  - 布局: 重构侧边栏和主内容区域布局结构，集中到 `HomeLayout` 组件中管理。
  - 文件管理器样式: 移除重复样式并迁移到 `tailwind` 配置。
  - 详情面板: 重构文件管理器的详情面板状态管理至 `uiStore`。
  - 文件管理器类型: 统一使用 `FAMItem` 类型替换本地 `ListItem` 定义。
- feat: 新增功能
  - 文件管理: 新增网格视图尺寸调整和扩展名排序功能。
  - 文件管理路由: 添加文件管理路由模块，支持文件/目录列表查看、创建、删除、重命名、移动、上传下载。
  - 文件管理器页面: 添加文件管理器页面及组件，实现文件列表、网格视图和面包屑导航。
- style: 样式调整
  - 文件管理器: 调整文件管理器的样式和颜色配置。
- fix: 问题修复
  - 文件管理器: 在文件重命名操作中添加对系统路径、固定路径和项目结构目录的保护检查。
- docs: 文档更新
  - 前端: 新增前端文件管理器设计文档。

## 2025 年 6 月 14 日

- fix: 问题修复
  - Tooltip: 修复 `Tooltip` 组件 `placement` 类型问题。
- refactor: 代码重构与优化
  - 文件系统操作: 重构文件系统操作以使用统一的 `FileManagerService`。
- feat: 新增功能
  - 文件管理: 实现文件管理服务核心功能，支持解析逻辑路径和基本文件操作。
- docs: 文档更新
  - 架构: 添加统一文件与资产管理系统的设计文档草案。
  - 架构图: 添加项目架构图及 `mermaid` 源码。
  - 文档清理: 移动已实施的到 `old` 文件夹。
  - 包版本: 更新所有包的版本号至 `0.0.8` 或 `0.1.2`。
  - 项目结构: 更新项目结构脑图文档以反映最新技术架构。
  - 技术文档: 全面新建和完善项目技术文档体系。
  - 过时文档: 清理过时文档。
  - 规则: 添加对话框与通知服务规范文档。
- chore: 杂项
  - 版本更新: 更新所有包的版本号至 `0.0.8` 或 `0.1.2`。

## 2025 年 6 月 13 日

- feat: 新增功能
  - 用户认证: 在项目路由中添加用户认证支持。
  - 用户设置: 添加初始用户名设置功能并改进相关组件。
  - 用户资料: 添加用户名修改功能及相关组件。
  - 认证: 实现用户认证和密钥凭证管理功能。
  - 后端认证: 实现用户认证与密钥管理功能。
- fix: 问题修复
  - vComfyTooltip: 检查空内容时不显示工具提示。
- refactor: 代码重构与优化
  - 认证中间件: 重构认证中间件为函数式插件并改进错误处理。
  - SideBar: 移除 `Tooltip` 组件改用 `v-comfy-tooltip` 指令。
  - 启动脚本: 添加项目环境准备步骤并整合数据库初始化。
  - 项目配置: 优化项目配置并添加数据库迁移支持。
- docs: 文档更新
  - 用户系统: 本地用户系统设计方案已更新至 v3。

## 2025 年 6 月 12 日

- docs: 架构文档更新
  - 知识库架构: 更新知识库架构文档，废弃 `placement` 字段并新增 `depth_offset`，支持 `SillyTavern` 资产导入。
  - Agent 工具调用: 添加 Agent 工具调用协议设计文档。
  - 应用面板与 Agent: 更新应用面板与 Agent 集成的设计文档。
  - Agent 系统: 更新架构文档以整合 Agent 系统，新增 `Agent Profile` 定义管理。
  - 知识库质量: 更新 Agent 架构文档以包含知识库质量管理与遗忘机制。
  - AgentRuntime: 修改 `AgentRuntime` 的驱动机制描述，扩展为混合驱动模式。
  - WorldState: 更新 `WorldState` 的原子性更新与并发控制描述。
  - Agent 安全: 丰富 Agent 安全与权限控制内容。
  - Agent 可观测性: 增强 Agent 行为可观测性与调试描述。
  - 格式修正: 修正格式错误。
  - Agent 架构: 添加 `ComfyTavern Agent` 架构详细规划报告 (v3 - 整合版)。
  - 动态世界模拟: 新增动态世界模拟引擎架构文档 v2 并更新原文档。
- docs: 兼容性
  - SillyTavern 兼容性: 将 `SillyTavern` 资产导入与 `ComfyTavern` 兼容性策略的初步内容撰写完成。

## 2025 年 6 月 11 日

- docs: 文档更新
  - 客户端脚本: 添加客户端脚本指南文档。
  - 工作流历史: 添加工作流历史记录与状态管理指南文档。
  - 场景架构: 添加场景架构设计文档。
  - 工作流概念: 添加工作流概念详解文档。
- feat: 新增功能
  - 拖拽: 改进拖拽节点的视觉反馈和暗色模式支持。
  - 画布: 支持从画布添加节点时指定位置。
  - 输入组件: 优化输入组件选择逻辑。
  - 工作流保存: 替换 `prompt` 为 `dialogService` 实现工作流保存命名。
  - 侧边栏: 使用本地存储保存预览面板模式状态。
  - Tooltip: 实现全局 `Tooltip` 服务并替换多处独立组件。
- refactor: 代码重构与优化
  - 上下文菜单: 重构上下文菜单定位逻辑使用视口坐标。
  - 节点定义: 清理节点定义文件中的注释和格式。
  - Markdown 渲染: 优化 `Markdown` 渲染和 `Tooltip` 交互逻辑。
  - workflowTransformer: 重构 `workflowTransformer` 以优化缓存和辅助函数。
- style: 样式调整
  - 组件: 调整布尔切换和字符串输入组件的样式。
- fix: 问题修复
  - 输入组件: 根据 `matchCategories` 区分纯下拉选择和带建议输入框。
  - 版本管理: 修复版本号获取和使用不一致的问题。

## 2025 年 6 月 10 日

- docs: 文档更新
  - 架构: 拆分项目架构和知识库架构设计文档。
  - README: 更新 `README` 文档内容与结构。
- refactor: 代码重构与优化
  - API 服务: 重构 API 服务与集成接口文档为前端 API 适配管理器设计。
- fix: 问题修复
  - LLM 测试: 智能处理 `base_url` 的版本路径。
- feat: 新增功能
  - Tokenization 服务: 新增全局 `Tokenization` 服务设计方案。
  - 性能统计: 改进性能统计面板的 UI 和功能，重构组件使用统计逻辑并移除无用代码，修正组件实例统计标签描述更准确，添加组件实例统计功能，添加性能统计面板及相关功能。

## 2025 年 6 月 9 日

- refactor: 代码重构与优化
  - 工作流: 清理调试日志并优化节点组输入顺序处理。
  - Markdown 渲染: 优化 `Markdown` 渲染和 `Tooltip` 交互逻辑。
  - workflowTransformer: 重构 `workflowTransformer` 以优化缓存和辅助函数。
- feat: 新增功能
  - NodeGroup: 实现节点组实例输入值覆盖和模板同步功能。
  - 剪贴板: 实现系统剪贴板与本地剪贴板功能。
- docs: 文档更新
  - CONVERTIBLE_ANY: 添加 `CONVERTIBLE_ANY` 类型详细说明。
  - 节点组: 移除关于节点组节点的描述。

## 2025 年 6 月 8 日

- refactor: 代码重构与优化
  - ExecutionEngine: 优化接口输出处理流程并支持批处理 Promise。
- feat: 新增功能
  - ExecutionEngine: 支持异步处理节点输入和流式输出。
  - OpenAINode: 在流式处理中累积并返回完整响应内容。
  - WebSocket: 实现接口流式输出和后台任务管理。
  - Utilities: 添加流后缀接力节点实现。
  - Stream: 新增流式处理支持及相关节点。
- docs: 文档更新
  - 节点类型: 添加 `STREAM` 类型及相关流式处理文档。
- fix: 问题修复
  - ExecutionEngine: 修复节点执行失败后未跳过下游节点的问题。
  - UI: 修正右预览面板的显示逻辑和样式。
- style: 样式调整
  - UI: 修正右预览面板的显示逻辑和样式。

## 2025 年 6 月 7 日

- feat: 新增功能
  - WebSocket: 新增 `NODE_YIELD` 消息类型支持流式输出。
  - ExecutionEngine: 添加日志敏感信息过滤功能。
  - LLM 测试: 为 `OpenAINode` 添加默认值和占位文本。
  - 预览面板: 添加流式预览模式并优化显示逻辑。
  - Streaming: 实现 LLM 节点流式输出功能。
  - ExecutionEngine: 添加流式节点执行支持。
  - 类型: 添加流式处理支持并重构类型定义。
  - 组件: 为输入组件添加大尺寸支持。
  - 对话框: 添加输入和多行输入对话框功能。
  - UI: 添加全局对话框和通知系统。
- style: 样式调整
  - 输入组件: 调整内联输入组件的最小宽度。
  - 设置: 调整设置页面的间距、字体和颜色变量。
  - 前端: 移除链接颜色注释并优化侧边栏路由链接样式。
  - Dialog: 移除对话框组件的边框并统一输入框样式。
- refactor: 代码重构与优化
  - 工作流: 优化代码结构并修复类型导入顺序，统一代码格式和缩进风格。
  - CharacterCardPreview: 修复角色卡预览页面的路由链接。
  - 类型: 重构类型定义文件结构并优化类型组织。
  - 布局: 将设置页面导航从侧边栏改为顶部标签页。
  - ProjectListView: 使用 `dialogService` 替换原生 `prompt` 进行项目创建。
  - 对话框组件: 重构对话框组件为统一 `Dialog` 组件并更新 `DialogService`。
  - UI: 替换 `alert` 为 `DialogService` 提供统一错误提示。
  - 路由: 重构路由结构并添加主页布局组件。
  - 布局: 重构设置页面布局并优化侧边栏导航。
- docs: 文档更新
  - 规则: 添加 `apply_diff` 工具报错排查指南。
  - 规则: 更新代码检查命令。
  - 规则: 更新规则文档并添加完整性规范。

## 2025 年 6 月 6 日

- feat: 新增功能
  - 配置: 添加配置文件合并功能以补全缺失字段。
- docs: 文档更新
  - 架构: 添加流处理核心机制与背压策略文档。
  - 交互模板: 更新交互模板和节点接口模型的架构文档。
  - 流式功能: 更新流式功能设计文档，新增 `StreamAggregatorNode` 设计。
  - 流式功能: 更新流式功能计划文档，明确阶段划分和设计原则。

## 2025 年 6 月 5 日

- docs: 文档更新
  - 流式功能: 完善流式功能设计文档中的事件类型和错误处理。
  - 流式功能: 添加流式功能演进计划文档。
  - 本地用户系统: 更新本地用户系统设计方案，增加 API Key 扩展。
  - 本地用户系统: 添加本地用户系统设计方案文档。
  - 应用面板: 添加应用面板集成方案及相关设计文档。
- feat: 新增功能
  - 移除注释: 移除注释。
- refactor: 代码重构与优化
  - 节点尺寸: 将节点尺寸属性从对象结构改为独立属性。
  - 工作流: 根据设计文档移除未使用的类型和接口。

## 2025 年 6 月 4 日

- style: 样式调整
  - 控制台日志: 优化控制台日志格式并添加自定义启动信息。
  - 后端日志: 改进服务器启动日志的可读性和信息展示。
  - 节点样式: 修复节点头部右侧布局和文本换行问题。
- feat: 新增功能
  - 配置文件: 添加配置文件检查与自动复制功能。
- chore: 杂项
  - gitignore: 更新 `.gitignore` 并添加 `config.template.json`。
- docs: 文档更新
  - README: 添加核心文档链接和更新目录结构。
  - README: 更新前后端 `README` 文档以完善项目描述。
  - Updatelog: 更新设计文档变更记录。
- fix: 问题修复
  - 工作流: 修复删除节点时未正确处理关联边的问题。
  - 节点加载: 修正自定义节点路径加载问题并改进节点重载逻辑。
  - 节点加载: 修复自定义节点路径解析和错误处理。
- refactor: 代码重构与优化
  - 节点宽度: 优化节点宽度计算逻辑并调整参数。
  - 架构文档: 简化项目与知识库架构文档结构。
  - 知识库架构: 完善知识库架构文档中的嵌入模型配置和动态引用机制。
  - 架构设计: 添加项目与知识库架构规划 v2 文档。

## 2025 年 6 月 3 日

- docs: 文档更新
  - 自定义节点: 更新自定义节点开发文档以反映路径变更。
  - 节点类型: 更新节点类型文档并添加自定义节点开发指南。
  - 节点类型: 添加 `UI_BLOCK` 类型和 `hideHandle` 选项说明。
  - 节点输入渲染: 更新节点输入渲染重构方案文档。
- feat: 新增功能
  - 节点加载: 添加自定义节点路径配置支持。
  - 节点: 添加隐藏连接点支持并优化 UI 块级渲染。
- refactor: 代码重构与优化
  - 架构: 优化 `BaseNode.vue` 模板渲染逻辑，引入 `SlotUIDescriptorFactor`。
- fix: 问题修复
  - UI: 修正节点输入操作栏的自定义动作顺序。

## 2025 年 6 月 2 日

- docs: 文档更新
  - gitignore: 添加 `.VSCodeCounter` 到 `.gitignore`。
  - 规则: 添加通用类型导入路径说明到规则文档。
  - 架构: 添加节点输入 UI 渲染重构规划文档并移除废弃字段。
- feat: 新增功能
  - Regex: 实现内联正则规则编辑器功能。
  - 节点输入: 实现动态输入操作按钮系统。
  - 侧边栏: 添加节点面板折叠状态本地存储功能。
- style: 样式调整
  - 侧边栏: 优化节点面板和侧边栏的样式细节。

## 2025 年 6 月 1 日

- docs: 文档更新
  - 架构: 新增前端主导的工作流预览执行方案文档。
  - README: 更新 `README.md` 中的状态描述和功能说明。
  - 自定义节点: 添加自定义节点开发指南文档。
- refactor: 代码重构与优化
  - workflowFlattener: 修正代码缩进和格式。
  - workflowTransformer: 移除调试日志代码。
  - 服务: 将节点管理相关文件移动到 `services` 目录。
  - 调试日志: 移除调试日志以清理代码。
- chore: 杂项
  - 版本: 更新版本号。
- feat: 新增功能
  - 工作流: 添加工作流接口输入输出支持。
  - 工作流: 添加自定义插槽描述和节点转换逻辑。
  - 工作流: 修复对引用工作流的支持。
  - 节点显示: 添加 `displayName` 字段作为节点显示名称的主要来源。
  - WorkflowInfoPanel: 添加调试按钮输出工作流 JSON 到控制台。
  - 节点组: 实现节点组动态接口同步与边类型验证。
- fix: 问题修复
  - 工作流数据: 修正工作流数据保存时的日志打印和默认工作流的坐标位置。
- refactor: 代码重构与优化
  - schemas: 重构插槽定义结构并提取公共辅助函数。

## 2025 年 5 月 31 日

- feat: 新增功能
  - 节点分组: 为分组节点添加表情前缀并完善清除引用逻辑。
- refactor: 代码重构与优化
  - 节点: 重构节点组编辑功能并优化代码结构。
  - 节点连接验证: 优化类型兼容性检查逻辑和代码结构。
  - 组件: 优化状态栏和标签栏的布局和滚动行为。

## 2025 年 5 月 30 日

- fix: 问题修复
  - 输入组件: 将 `wheel` 事件监听改为 `passive` 模式。
  - 节点组: 修复节点组连接验证和分组逻辑中的类型处理问题。
- feat: 新增功能
  - 节点组: 允许单个节点创建组并更新提示信息。
- docs: 文档更新
  - 架构: 添加应用面板集成方案设计文档。
  - 文档清理: 移动已实施计划到 `old`。
  - 架构: 添加 `ComfyTavern Agent` 架构规划草案文档。
- refactor: 代码重构与优化
  - WebSocket: 优化 `WebSocket` 处理器错误处理和消息格式。

## 2025 年 5 月 29 日

- feat: 新增功能
  - 编辑器: 添加节点搜索面板功能。
  - 编辑器: 实现右键菜单级联节点选择功能。
  - 节点菜单: 优化节点右键菜单功能并自动展开预览面板。
  - GroupIOEdit: 为输入默认值添加建议选项支持。
  - 节点预览面板: 添加配置项预览区域以显示节点配置详情。
  - 工作流: 添加工作流输出接口映射和组输出预览功能。
- refactor: 代码重构与优化
  - Canvas: 优化画布组件代码结构并改进全选功能。
  - RandomNumberNode: 优化客户端脚本逻辑并清理注释。
  - 工作流: 优化工作流交互协调器的代码结构和文档。
  - 工作流: 重构工作流交互协调器以优化代码结构。
  - 工作流: 重构节点输入连接顺序更新逻辑。
  - 工作流执行: 重构工作流执行逻辑以处理客户端脚本更新。
  - 工作流执行: 重构工作流执行逻辑以使用核心数据转换。
  - 工作流: 重构工作流执行逻辑至独立 composable。
  - RandomNumberNode: 移除模式切换时的立即数值更新。
  - 节点脚本: 添加客户端脚本定义状态检查逻辑。
  - StatusBar: 调整工作流执行顺序以优化客户端脚本处理。
- fix: 问题修复
  - 上下文菜单: 修复菜单定位和样式问题。
  - 工作流执行: 优化未连接接口输出的日志处理。
  - 保存操作: 调整保存操作历史记录的顺序，使得保存图标能够正确显示。
  - 分隔符: 修复分隔符转义字符处理逻辑。

## 2025 年 5 月 28 日

- feat: 新增功能
  - RandomNumberNode: 增加随机数节点的增/减模式和后端执行逻辑。
  - 工作流: 添加节点多输入连接顺序支持并增强调试日志。
  - 预览面板: 增强预览面板功能并改进显示内容。
  - 调度器: 添加多用户模式支持并传递用户 ID 到执行引擎。
  - LLM 节点: 添加创建消息和合并消息节点并修复文档格式。
  - 设置: 添加紧凑模式响应式布局支持。
  - LLM 配置: 添加响应式布局支持并优化 UI 细节。
  - 项目版本: 更新项目版本号。
- refactor: 代码重构与优化
  - 前端: 优化工作流执行逻辑并清理调试日志。
  - 多输入连接: 重构多输入连接排序和断开逻辑以使用工作流快照。
  - 样式: 优化样式代码并添加新类型颜色定义。
  - ExecutionEngine: 添加子句柄解析功能并改进多输入处理。
  - BaseNode: 重构组件代码结构并优化导入组织。
  - useCanvasConnections: 清理未使用的代码和优化连接逻辑。
- fix: 问题修复
  - WebSocket: 修复工作流执行时消息关联错误问题。
  - Canvas: 修复单输入插槽连接替换逻辑。
  - 侧边栏: 修复节点选择和预览面板的渲染问题。
  - nodeStore: 改进节点定义查询逻辑以支持多种格式。
- docs: 文档更新
  - 节点显示: 添加节点或插槽显示规则说明。
  - Kilo 规则: 添加 `roorules`。
  - 文档: 转移部分已实施的文档到 `old` 目录。

## 2025 年 5 月 27 日

- feat: 新增功能
  - 节点连接: 添加多输入插槽连接顺序支持并优化连接处理逻辑。
  - 前端: 优化拖拽交互并增强连接管理功能。
  - 多输入插槽: 添加内联连接排序组件和 `vuedraggable` 依赖。
  - 多输入插槽: 实现跑道式多子 `Handle` 交互与连接管理。
  - 多输入插槽: 添加多输入插槽交互精炼与原子化历史记录计划。
  - 节点连接: 实现多输入插槽的动态高度和连接顺序管理。
- refactor: 代码重构与优化
  - 多输入连接: 移除未使用的参数并改进多输入槽值数组初始化逻辑。
  - 工作流: 实现多输入连接断开功能并重构相关逻辑。
  - 工作流: 重构多输入边移动和重新连接逻辑。
  - 工作流: 同步边数据并重构多输入连接处理。
  - 节点工具: 将 `parseSubHandleId` 提取为共享工具函数并优化多输入连接处理。
  - BaseNode: 移除调试用的 `console.log` 语句。
- fix: 问题修复
  - 调试日志: 添加调试日志以跟踪连接和更新后的边状态。
  - Canvas: 修复 `CONVERTIBLE_ANY` 类型连接功能并优化连接逻辑。
  - 连接: 修复多输入连接验证和重排逻辑。
  - Canvas: 修复边重新连接时目标子句柄占用检查逻辑。
  - UI: 调整多输入 `Handle` 的最小高度因子。

## 2025 年 5 月 26 日

- feat: 新增功能
  - 节点连接: 实现多输入插槽连接顺序管理和拖拽断开功能。
  - 文档: 多输入插槽增强功能实现细节调整。
  - 多输入插槽: 实现多输入插槽增强功能方案设计。
- docs: 文档更新
  - 多输入插槽: 添加多输入插槽增强计划的详细调查结果与实施计划。

## 2025 年 5 月 25 日

- fix: 问题修复
  - workflowTransformer: 修正节点输入输出类型属性名从 `type` 改为 `dataFlowType`。
  - vueflow: 修复接口更新后连接边消失的问题。

## 2025 年 5 月 24 日

- style: 样式调整
  - 侧边栏: 优化侧边栏样式和主题调整逻辑。
  - 节点操作: 将节点操作图标修改为加号并调整样式。
- feat: 新增功能
  - SideBar: 添加亮色主题支持。
  - 节点: 添加节点文件路径支持并优化客户端脚本加载。
- refactor: 代码重构与优化
  - 组件: 重构右侧预览面板的展开收起逻辑和样式。
  - RightPreviewPanel: 调整预览面板布局并增加顶部拖拽功能。
- docs: 文档更新
  - 节点类型: 更新节点类型系统文档及类型定义文件。

## 2025 年 5 月 23 日

- docs: 文档更新
  - 文件管理器: 新增文件管理器系统设计方案文档。
  - 工作流执行: 更新工作流执行计划并添加文件输出管理设计方案。
- refactor: 代码重构与优化
  - History DB: 移除 `History DB` 相关代码和设计文档。
  - 侧边栏: 暴露 `setActiveTab` 方法并优化侧边栏引用管理。
  - 代码清理: 清理代码注释和格式化文件。
  - Utilities: 移动实用工具到单独目录。
  - UI: 重构 `AboutView.vue` 增强视觉效果和交互体验。
- fix: 问题修复
  - UI: 移除跳过特定目录的逻辑。
  - UI: 调整 `AboutView.vue` 中 `padding` 值。
- feat: 新增功能
  - UI: 微调关于页的样式。

## 2025 年 5 月 22 日

- feat: 新增功能
  - OverlayScrollbars: 在多个视图页面中添加 `OverlayScrollbars` 组件以改善滚动体验。
  - ExecutionEngine: 实现节点绕过机制并生成伪输出。
  - 工作流执行: 增加工作流执行系统设计方案 V2。
- refactor: 代码重构与优化
  - 视图: 优化代码格式和可读性，统一缩进和换行风格。
  - 工作流: 统一配置项命名并增强调试日志。
- docs: 文档更新
  - 架构: 更新设计文档，补充预览机制与错误处理细节。
  - 工作流执行: 更新工作流执行计划文档内容。
  - 工作流执行: 详细描述实时预览机制。

## 2025 年 5 月 21 日

- refactor: 代码重构与优化
  - 节点: 将整数类型从 `INT` 改为 `INTEGER` 并调整拖拽灵敏度。
  - 类型: 移除 `GroupSlotInfo` 和 `InputDefinition` 中的 `defaultValue` 字段。
  - 编辑器: 优化代码编辑器样式和功能，提升用户体验。
- docs: 文档更新
  - 内存库: 更新项目总结和进度日志。
  - 规则: 更新规则文档并追加新的更新日志。
- fix: 问题修复
  - 任务状态: 更新任务 4.8 状态及完成备注。
  - 开发: 修复 `Vite HMR` 及 `monorepo` 文件监视问题。
  - 项目目录: 增加项目目录检查和预览服务器配置，删除默认项目文件。
- style: 样式调整
  - 侧边栏: 侧边栏图标栏宽度调整。
  - 核心: 调整输入提示文本的字体大小。
- feat: 新增功能
  - 编辑器: 添加 `vscode` 搜索插件并优化编辑器样式。
  - 搜索: 新增搜索功能并优化移动端 `Tooltip` 交互。
  - 系统代理: 增加系统代理检测与设置功能。

## 2025 年 5 月 20 日

- feat: 新增功能
  - 编辑器: 为 `RichCodeEditor` 添加行号配置和代码折叠功能。
- docs: 文档更新
  - 决策日志: 更新决策日志，记录节点面板刷新功能优化过程。
- refactor: 代码重构与优化
  - 节点管理: 重构节点加载和重载逻辑，优化 `WebSocket` 通知处理。

## 2025 年 5 月 19 日

- refactor: 代码重构与优化
  - projectService: 提取并复用文件读取、目录检查和冲突验证逻辑。
  - backend: 重构 `projectRoutes` 将业务逻辑迁移至服务层。
  - 前端: 优化节点预览面板和连接验证逻辑。
  - 构建: 优化前端和后端的构建及启动脚本。
- feat: 新增功能
  - 项目: 重构项目创建流程并增加输入验证。
  - 角色卡: 新增角色卡 API 路由并优化前端服务逻辑。
  - 编辑器: 添加暗黑模式支持并优化编辑器主题同步。
- fix: 问题修复
  - estree-walker: 更新 `estree-walker` 版本并调整相关依赖。
  - 编辑器: 修复可停靠编辑器标签页内容加载和 JSON 处理问题。
- chore: 杂项
  - 依赖: 更新 `package.json` 中的依赖项。
  - 构建: 使用 `bun exec` 执行 `build` 脚本。
  - 依赖: 更新依赖和脚本配置。
  - 启动脚本: 在启动脚本中添加依赖安装步骤。

## 2025 年 5 月 18 日

- feat: 新增功能
  - JSON 查看器: 新增 `JsonInlineViewer.vue` 组件，用于在节点内显示 JSON 数据的只读预览。
  - 编辑器: 添加底部可停靠编辑器面板的空状态提示。
  - 编辑器: 实现可停靠编辑器面板并集成到主视图。
  - 编辑器: 实现可停靠编辑器面板及其核心组件。
  - EditorView: 添加右侧专用预览面板并集成到主视图。
  - 预览目标: 新增预览目标功能并优化代码编辑器。
- refactor: 代码重构与优化
  - 节点插槽类型系统: 重构节点插槽类型系统，统一使用 `DataFlowType` 和 `matchCategories`。
- docs: 文档更新
  - 架构: 更新编辑器面板设计文档并删除旧文件。
  - 规则: 在规则文档中添加中文注释要求。

## 2025 年 5 月 17 日

- feat: 新增功能
  - ROO: 创建了 `ROO` 的记忆库。
- docs: 文档更新
  - 节点插槽: 更新节点插槽类型系统设计文档和重构计划。
  - 架构: 添加新版节点插槽类型系统设计文档。

## 2025 年 5 月 16 日

- refactor: 代码重构与优化
  - 前端: 优化历史记录面板的格式化显示。

## 2025 年 5 月 7 日

- docs: 文档更新
  - 许可证: 添加 MIT 许可证文档。
  - 文档分类: 重构文档分类。
  - 内容清理: 清理内容。
- chore: 杂项
  - 提交: 初始提交到 GitHub。

## 早期开发记录 (无具体日期)

- 项目初始化与基础架构
  - 创建基本结构，添加 `LiteGraph.js` 的基本画布功能。
  - 从旧项目迁移了一些节点，添加了自动节点加载模块。
  - 添加了右键菜单功能。
  - 计划重构为前后端分离的架构，并制作了重构计划文档 `re重构和改进计划.md`。
  - 开始初始化，将原有代码分离前后端并进行重构。
  - 完成了项目的基础结构创建，包括 `apps` 目录下的 `frontend` 和 `backend` 应用，以及 `packages` 目录下的 `types` 和 `utils` 共享包。
  - 后端基础架构完成：实现了类型系统（`@comfytavern/types`），定义了节点接口和类型，支持多种输入类型，实现了 `WebSocket` 消息类型；完成了核心功能：节点管理器、`HTTP API` 用于获取节点定义、`WebSocket` 接口用于节点执行、图像处理工具支持；实现了基础节点：`APISettingsNode`、`OpenAINode`。
- 前端画布与 UI 改进
  - 更新了重构计划文档 `re重构和改进计划.md` 的前端部分。
  - 计划快速开发一个 `Chat` 组件，用于测试 `AI` 聊天功能。
  - 重构了计划文档，现在是 `docs/backend计划.md` 和 `docs/frontend计划.md` 两部分。
  - 完成了前端项目的初始化，添加画布组件及状态管理。
  - 修复了 `TypeScript` 路径别名配置问题。
  - 修复画布尺寸问题，并添加了画布缩放、适应节点、重置缩放功能。
  - 通过 `css` 样式隐藏了 `LiteGraph.js` 默认的右键菜单，并添加了自定义的右键菜单功能。
  - 优化了 `vue` 模板样式，使 `app` 宽度不再受限。
  - 将 `LiteGraph` 库改成 `comfyorg/litegraph`，并修改了相关代码。
  - 修复了画布加载闪烁的问题，修复页面路由为空，添加了主页路由。
  - 修复了高 `DPI` 屏幕下节点编辑器的缩放问题。
  - 修复了画布缩放、适应节点、重置缩放功能按钮，现在它们能在新的画布上生效。
  - 添加了 `sever.ts` 文件，用于启动服务器，并添加了启动脚本 `start.bat` 和 `start.sh`。
  - 修复了项目启动问题：修正了 `server.ts` 中的开发/生产模式判断逻辑，更新了启动脚本以正确传递开发模式参数，确保了前端和后端服务都能正确启动。
  - 修复了前端请求后端跨域问题，现在可以正常请求后端接口。
  - 添加了右键菜单添加节点的子菜单显示，可以从节点信息中自动生成节点菜单。
  - 添加了配置文件，设置了前后端口号，使其不再硬编码。
  - 完成了节点系统的改进，主要包括类型系统增强、依赖管理和节点实现。
  - 优化画布渲染性能，减少了不必要的渲染。
  - 完成了画布组件的代码重构，提高了代码模块化、修复了关键问题并提升了代码质量。
  - 添加错误日志节流机制，避免控制台刷屏。
  - 重构了主题系统，直接照搬了 `comfyui` 的主题配置。
  - `WebSocket` 连接问题已成功解决。
  - 完善核心功能（第二阶段）：实现 `workspaceStore` 和 `uiStore`，添加工作流操作，完善节点交互。
  - 迁移了 `HistoryNode.ts`、`MergeHistoryNode`、`OpenAIChatNode` 三个旧节点。
  - 更新了 `.clinerules` 中的代码规范建议。
  - 节点尺寸问题已修复。
  - 成功添加了多行文本框组件，并修复了部分样式问题。
  - 正在调查组件间距过大问题。
  - 重构了画布和 `app` 的职责，但间距问题待修复。
  - 修复多行文本框 `y` 轴偏移及 `WebSocket` 连接状态更新问题。
  - 修复画布的渲染性能问题，优化了画布渲染逻辑。
- VueFlow 前端分支计划
  - 尝试使用 `vueflow.js` 作为画布引擎来解决 `LiteGraph.js` 的样式问题。
  - 完成了 `frontend-vueflow` 项目的初始化和配置。
  - 更新了启动脚本的配置，现在支持多种启动方式。
  - 添加了主页（占位）、编辑页（节点画布）。
  - 调整了布局，使用侧边 `bar` 来切换页面内容。
  - 修复了 `Tailwind CSS` 配置问题。
  - 修改了角色卡片样式，现在角色卡的样式更加现代化。
  - 添加了颜色主题切换功能和暗色模式样式。
  - 将 `SillyTavern` 相关内容从前端资产目录移动到独立的 `library` 目录。
  - 添加视差效果和侧边栏折叠功能。
  - 添加从 `PNG` 提取角色卡数据的功能，并修复了无图像的 `json` 角色卡加载问题。
  - 抽取了角色卡数据处理函数减少了重复代码，优化角色卡组件样式和侧边栏逻辑。
  - 添加在画布和节点的右键菜单功能。
  - 添加了节点库侧边栏，支持列出、预览、添加和搜索节点。
  - 实现拖拽功能并优化节点添加体验。
  - 去掉了节点背后多余的矩形背景。
  - 添加了后端测试节点 (`TestWidgetsNode.ts`) 和前端输入组件。
  - 将节点组件抽离成独立组件，使用更简洁的数据流转方式，优化状态管理。
  - 修改 `BaseNode.vue`，扩大侧边拖拽手柄的响应区域，修复了拖拽宽度不跟手的问题，移除了所有过渡动画。
  - 为画布和节点添加暗色模式支持。
  - 将插槽类型的显示方式从常驻改为悬停在插槽圆点上时显示为提示信息。
  - 在输入组件的容器上添加了 `@mousedown.stop`，对齐了多行文本框的宽度，使界面更加紧凑。
  - 新增 `CodeInput` 组件，使用 `vue-codemirror` 实现代码高亮和编辑功能。
  - 将 `Canvas.vue` 中的节点连线逻辑拆分到 `useCanvasConnections.ts` `Composable` 中。
  - 修复了旧连线在建立新连接时未能正确移除的问题，添加了连线类型判断来拒绝不合法的连接。
  - 修复了节点标题不显示的问题，优化了节点自动宽度计算方式。
  - 优化了输出槽之间的垂直间距。
  - 添加节点输入插槽的类型兼容规则。
  - 实现多对一输入插槽功能。
  - 创建了新的 `TextDisplay` 组件。
  - 调整了节点样式，把输出插槽改成在输入的上方。
  - 优化了多对一插槽的类型检查。
  - 修复节点插槽的显示名称问题。
  - 添加了节点组框架。
  - 添加了在前端重载后端的功能。
  - 修复了节点库面板没有正确显示节点名称和描述的问题。
  - 修改了所有节点，统一了 `displayName` 和 `description` 的使用方式。
  - 修改 `NodePreviewPanel.vue`，使其能够根据节点库侧边栏的宽度动态调整自身位置。
  - 添加了 `SidebarManager.vue` 组件来管理侧边栏的显示和隐藏。
  - 重构了前端 `EditorView.vue` 中的 `createDefaultNodes` 函数。
  - 添加了工作流保存功能，支持保存和加载工作流 `json`。
  - 集成 `sanitize-filename` 库，用于安全地处理包含多国语言字符的工作流名称。
  - 修复了保存工作流 `url` 转义的问题。
  - 修复了节点 `ID` 问题，现在使用一个统一的 `ID` 生成器来生成 `ID`。
  - 添加启动画面（`splash screen`）并在 `App.vue` 中添加逻辑以在应用挂载后隐藏它。
  - 添加按钮输入类型到前端节点，并创建了一个使用该按钮的 `RandomNumberNode` 示例节点。
  - 添加了节点引擎部分实现（未完成）。
  - 引入了两个核心功能：标签页系统 和 节点组功能。
  - 将 `workflowStore` 中的复杂逻辑拆分到多个专门的 `Vue Composables` 中。
  - 将 `BaseNode` 组件进行了重构，将核心逻辑拆分到独立的 `Vue Composables` 中。
  - 后端和类型定义已更新为使用 `Zod` 库进行数据验证。
  - 前端 `VueFlow` 项目得到了增强。
  - 移除了一些过时的文档文件。
  - `package.json` 中的版本号已更新。
  - 新增带建议输入和按钮组件及文档说明，修复了一些组件样式和交互问题。
  - 实现了节点的客户端逻辑执行功能。
  - 优化了前端状态管理，将 `nodeStore` 重构为标准 `Pinia` 写法。
  - 允许节点定义指定首选宽度 (`width` 字段)，并修复了一些前端 `UI` 和后端 `API` 的小问题。
  - 添加了节点插槽右键菜单来删除单个插槽的连线。
  - 重构了项目结构，引入"工程"（`Project`）的概念。
  - 通过在 `BaseNode.vue` 中使用 `computed` 属性来记忆化（缓存）传递给动态子组件的 `props` 对象。
  - 更新了 `workflowStore.ts`、`EditorView.vue` 和 `GroupIOEdit.vue` 文件，确保接口状态一致和同步。
  - 核心重构：节点组与工作流接口 - 借鉴 `Blender` 几何节点，重构了节点组功能。
  - 多项目管理与视图重构: 引入了多项目管理功能，允许用户创建、加载和管理多个工作流项目。
  - 后端 `index.ts` 重构：将节点 `API`、全局工作流 `API`、项目 `API` 和 `WebSocket` 处理逻辑分别拆分到不同的模块中。
  - URL 加载与状态重构: 通过 `URL` 加载工作流，重构核心状态管理。
  - workflowStore 重构: 将庞大的 `workflowStore` 拆分为多个职责单一的 `Composables`。
  - 核心状态管理重构与插件系统规划: 再次重构 `workflowStore`，引入 `useWorkflowManager` 集中管理核心状态；新增插件系统设计文档。
  - 修复了历史记录和状态管理相关 `bug`，修复了快捷键。
  - 通过重构 `WebSocket` 连接管理，将其改为全局单例模式，并解耦节点按钮点击事件的处理。
  - 重构了节点操作（添加、移动）与历史记录逻辑。
  - 将 `apps/frontend-vueflow/src/views/EditorView.vue` 中的逻辑重构到多个独立的 `composable` 文件中。
  - 对 `apps/frontend-vueflow/src/composables` 目录下的模块进行了分组。
  - 状态与历史重构: 引入交互与生命周期协调器 (`WorkflowInteractionCoordinator`, `WorkflowLifecycleCoordinator`) 重构 `workflowStore`。
  - 增强工作流组功能(`creationMethod`, `referencedWorkflows`), 重构历史记录为结构化对象, 添加节点组件状态存储。
  - 状态与历史重构 - 其二: 引入交互与生命周期协调器，重构历史记录为结构化对象，优化输入组件交互与历史记录触发，添加节点组件状态存储。
  - 前端执行准备: 完善了前端触发工作流执行、处理后端状态/错误消息、可视化节点状态/错误以及处理按钮点击交互的核心功能。
  - 节点交互与样式优化: 强制更新节点以响应 `IO` 顺序变化；重构 `Handle` 样式，支持主题和多类型；增强输入定义（默认值、范围）；修复历史记录中移除保存点时的索引 `Bug`；新增后端驱动预览方案文档。
  - 历史记录重构: 将历史记录从字符串标签重构为结构化的 `HistoryEntry` 对象。
  - 节点配置与组引用重构: 重构了节点配置更新和节点组引用更新的逻辑。
  - 工作流重命名与 `NodeGroup` 修复: 实现工作流重命名功能；修复 `NodeGroup` 加载 `referencedWorkflowId` 和过滤 `CONVERTIBLE_ANY` 插槽的 `Bug`。
  - 更新了节点类型文档。
  - 更新了浮动文本预览窗口计划并优化后端驱动预览功能文档。
  - 工作流数据重构: 重构工作流数据结构，引入 `WorkflowStorage*` 和 `Execution*` 类型，优化存储。
