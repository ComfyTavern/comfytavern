# 设计文档：应用面板 MVP 实施计划 (聚焦版)

## 1. 背景与目标

### 1.1. 现状

ComfyTavern 已具备成熟、强大的工作流创建与执行引擎。当前的核心任务是将这一核心能力，通过标准、安全的接口，赋能给独立的、沙盒化的**应用面板 (Panel)**，实现复杂的后端逻辑与轻量级前端交互的解耦。

### 1.2. 核心目标

本计划旨在聚焦于实现**应用面板与现有工作流引擎的连接与交互**。所有实施细节应严格遵循以下两个核心规范文档，它们是本次 MVP 的“单一事实来源”：

1.  **面板 API 规范**: [`./面板与接口/panel-api-specification.md`](./面板与接口/panel-api-specification.md)
    *   **任务**: 实现文档中定义的 `window.comfyTavern.panelApi` 接口，为面板提供标准化的调用能力。

2.  **执行核心与安全**: [`./面板与接口/execution-core-and-security.md`](./面板与接口/execution-core-and-security.md)
    *   **任务**: 确保从面板发起的调用遵循文档中描述的安全沙盒、输入注入和校验机制。

**重点：工作流的创建和设计由用户在编辑器中完成，不属于本计划的范围。本计划只专注于消费（执行）已有的工作流。**

---

## 2. 实施说明

具体的实施细节、任务和验收标准，请直接参考上述两个核心设计文档。本计划仅作为高层路线图，不再赘述具体实现。

架构图和具体的任务分解应以核心规范文档为准。

---

## 3. 后续展望 (Post-MVP)

在 MVP 成功的基础上，可以逐步引入更高级的功能：

*   实现 `panelApi` 的 `adapter` 模式，并构建 `ApiAdapterManager`。
*   完善面板的 CRUD 管理界面。
*   集成 Agent 相关的事件和交互。
*   开发更丰富的宿主服务 (`requestHostService`)。