# 整理提交内容到更新记录文件

**工作流描述:**
此工作流用于自动化维护项目的更新日志。你需要从 Git 提交历史中提取指定日期范围内的提交信息，将其格式化为 Markdown 列表，并智能地合并到`DesignDocs/Updatelog.md`文件中。

---

## 步骤

1.  **确认目标文件**

    - 默认使用`DesignDocs/Updatelog.md`作为目标更新日志文件。

2.  **获取日期范围**

    - 询问用户需要提取日志的**起始日期**和**结束日期**（格式：YYYY-MM-DD）。
    - 如果用户不提供结束日期，使用当天作为结束日期。

3.  **获取补充日志（可选）**

    - 询问用户是否有任何需要手动补充的、未包含在 Git 提交中的日志条目。

4.  **执行 Git Log 并读取现有日志**

    - 运行以下命令从 Git 历史中提取相关提交：
      ```bash
      git log --since="<起始日期>" --until="<结束日期>" --pretty="format:%cs %s%n%b" --no-patch
      ```
    - 同时读取`DesignDocs/Updatelog.md`的现有内容，为接下来的合并做准备。

5.  **格式化与合并**

    - 将提取到的 Git 提交记录和用户提供的补充日志，一同格式化为规范的 Markdown 列表。
    - 日期格式统一为`YYYY年M月D日`。
    - 将这些新内容智能地合并到现有日志中，确保日期倒序排列且内容无重复。

6.  **写入文件**
    - 将整理好的全新内容覆盖写入到`DesignDocs/Updatelog.md`文件中，完成更新。



咕，姐姐，我看到你的吐槽了。

确实，如果只是把 Git 提交记录像流水账一样直接罗列出来，那和自动化脚本没太大区别，甚至还麻烦一些。这完全没体现出“智能合并”的精髓嘛。

姐姐你想要的，是那种能看懂提交类型（比如 `feat`、`fix`、`refactor`），然后把同一天里、同一个功能模块的多次提交，**智能地合并**成一条清晰、完整的更新记录，就像你给出的 `Updatelog.md` 范例那样。

一个合格的助手，应该这样做咕：

---

### **咕咕优化的“智能更新日志”工作流**

1.  **确认目标和范围：**
    这个没问题，拿到目标文件 `DesignDocs/Updatelog.md` 和起止日期。

2.  **提取原始数据：**
    运行 `git log`，使用 `Conventional Commits` 规范的格式，提取出每一条提交的 **类型 (type)**、**范围 (scope)**、**简述 (subject)** 和 **正文 (body)**。

3.  **核心处理 - 智能分组与提炼 (这才是重点咕)：**
    *   **第一层：按天分组**
        先把所有提交按日期（例如 `2025-07-20`）归类。

    *   **第二层：按特性/模块分组**
        在每一天内，再按照 `type(scope)` 进行二次分组。比如，所有 `feat(plugin)` 的放一起，所有 `docs(架构)` 的放一起，所有 `refactor(节点分组)` 的放一起。

    *   **第三层：综合与提炼**
        这是最关键的一步。对于每个小组内的多条提交，不是简单罗列，而是进行综合提炼：
        *   **提炼主标题：** 从多条相似提交的简述 (subject) 中，综合出一个最高层级的、概括性的标题。例如，多个关于插件系统的小提交，可以提炼成一个“feat(plugins): 实现插件管理系统支持启用/禁用和重载功能”的大功能点。
        *   **生成子描述：** 将这些提交的具体内容 (body) 和次要标题，整理成有序的、可读的子列表，作为主标题下的详细说明。
        *   **处理独立提交：** 对于那些本身就是一个独立完整功能点的提交，就直接格式化成一条记录。

4.  **格式化与合并：**
    将新生成的、按天组织的、经过提炼的更新记录，与 `DesignDocs/Updatelog.md` 文件中已有的内容进行合并，并确保整体按日期倒序排列，内容无重复。

5.  **写入文件：**
    最后，把整理好的全新内容覆盖写回文件。

---

这样处理下来，最终的更新日志才会清晰、易读，真正有价值，而不是一堆杂乱的提交信息。

嗯，只是把 Git 日志直接搬运过来，确实算不上什么智能工作，顶多算个勤劳的搬运工咕。

姐姐，下次需要整理时，直接吩咐我就好，我会按照这个“智能版”的流程来处理。